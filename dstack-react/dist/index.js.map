{"version":3,"file":"index.js","sources":["../src/AccessForbidden/index.js","../src/Avatar/index.js","../src/BackButton/index.js","../src/Spinner/index.js","../src/Button/index.js","../src/CheckboxField/index.js","../src/Copy/index.js","../src/CodeViewer/index.js","../src/Dropdown/index.js","../src/utils/unicodeBase64Decode.js","../src/utils/formatBytesSize.js","../src/FileDragnDrop/index.js","../src/Loader/index.js","../src/MarkdownRender/index.js","../src/Modal/index.js","../src/config/index.js","../src/NotFound/index.js","../src/hooks/usePrevious.js","../src/ProgressBar/index.js","../src/TextField/index.js","../src/SearchField/index.js","../src/SelectField/index.js","../src/SliderField/index.js","../src/StackFilters/index.js","../src/StretchTitleField/index.js","../src/Tabs/index.js","../src/TextAreaField/index.js","../src/Tooltip/index.js","../src/ViewSwitcher/index.js","../src/Yield/index.js","../node_modules/babel-plugin-transform-async-to-promises/helpers.js","../src/stack/Attachment/Table/index.js","../src/api.js","../src/stack/Attachment/actionsTypes.js","../src/stack/Attachment/store.js","../src/stack/Attachment/actions.js","../src/stack/Attachment/index.js"],"sourcesContent":["// @flow\nimport React from 'react';\nimport image from './lock.svg';\nimport css from './style.module.css';\n\nconst AccessForbidden = ({children}) => {\n    return (\n        <div className={css.forbidden}>\n            <img src={image} alt=\"\" width=\"85\" height=\"104\" />\n\n            {children && (\n                <div className={css.message}>\n                    {children}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default AccessForbidden;\n","import React, {forwardRef} from 'react';\nimport cx from 'classnames';\nimport css from './styles.module.css';\n\ntype Props = {\n    onClick?: Function,\n    withBorder?: boolean,\n    className?: string,\n    name: string,\n    color?: 'violet' | 'turquoise' | 'blue' | 'lilac' | 'pink' | 'green' | 'green2' | 'orange',\n    size?: 'small' | 'normal' | 'list',\n}\n\nconst Avatar = forwardRef(({className, name, color = 'violet', size = 'normal', withBorder, onClick}: Props, ref) => {\n    return (\n        <div ref={ref} className={cx(css.avatar, className, color, size, {border: withBorder})} onClick={onClick}>\n            {name.slice(0, 2)}\n        </div>\n    );\n});\n\nexport default Avatar;\n","import React from 'react';\nimport cx from 'classnames';\nimport css from './styles.module.css';\n\nconst BackButton = ({Component = 'button', children, className, ...props}) => {\n    return (\n        <Component className={cx(css.back, className)} {...props}>\n            <span className=\"mdi mdi-arrow-left\" />\n            {children}\n        </Component>\n    );\n};\n\nexport default BackButton;","// @flow\nimport React from 'react';\nimport cx from 'classnames';\nimport css from './styles.module.css';\n\nconst COLORS = {\n    white: '#fff',\n    blue: '#507CD0',\n};\n\ntype Props = {\n    align?: 'center',\n    size?: number,\n    color?: 'white' | 'blue',\n    isShown?: boolean,\n    className?: string,\n};\n\nconst Spinner = ({size = 22, color = 'white', isShown, className, align}: Props) => {\n    return (\n        <div className={cx(css.spinner, className, align, {show: isShown})}>\n            <svg width={size} height={size} viewBox=\"0 0 22 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                {/* eslint-disable */}\n                <path\n                    d=\"M11.7046 18.9689C13.3618 18.8224 14.9321 18.1628 16.1969 17.0821C17.4617 16.0014 18.3581 14.5532 18.7614 12.9392C19.1647 11.3252 19.0548 9.62557 18.4469 8.07695C17.839 6.52832 16.7635 5.20773 15.37 4.29897C13.9765 3.39021 12.3343 2.9385 10.672 3.00671C9.00979 3.07491 7.41015 3.65964 6.09577 4.67951C4.78139 5.69938 3.81766 7.10365 3.33871 8.69687C2.85976 10.2901 2.88943 11.993 3.42358 13.5686L5.19569 12.9678C4.78648 11.7607 4.76375 10.4561 5.13067 9.23556C5.4976 8.01499 6.23591 6.93918 7.24286 6.15785C8.24981 5.37653 9.4753 4.92857 10.7488 4.87632C12.0222 4.82406 13.2803 5.17012 14.3478 5.86632C15.4154 6.56253 16.2394 7.57423 16.7051 8.76064C17.1708 9.94704 17.255 11.2491 16.946 12.4856C16.6371 13.7221 15.9503 14.8316 14.9814 15.6595C14.0124 16.4875 12.8094 16.9927 11.5398 17.105L11.7046 18.9689Z\"\n                    fill=\"url(#paint0_linear)\"\n                />\n                {/* eslint-enable */}\n\n                <defs>\n                    <linearGradient id=\"paint0_linear\" x1=\"13.5\" y1=\"18\" x2=\"4\" y2=\"13\" gradientUnits=\"userSpaceOnUse\">\n                        <stop stopColor={COLORS[color]} />\n                        <stop offset=\"1\" stopColor={COLORS[color]} stopOpacity=\"0.2\"/>\n                    </linearGradient>\n                </defs>\n            </svg>\n\n        </div>\n    );\n};\n\nexport default Spinner;\n","// @flow\nimport React, {forwardRef} from 'react';\nimport type {Node} from 'react';\nimport cx from 'classnames';\nimport css from './style.module.css';\nimport Spinner from '../Spinner';\n\ntype Props = {\n    Component?: any,\n    children?: Node,\n    className?: string,\n    size?: 'small' | 'normal' | 'large',\n    color?: 'default' | 'primary' | 'secondary' | 'lilac' | 'success' | 'fail',\n    variant?: 'default' | 'contained' | 'outlined',\n    isShowSpinner?: boolean,\n    fullWidth?: boolean,\n    onClick?: Function,\n};\n\nconst Button:Props = forwardRef((\n    {\n        Component = 'button',\n        children,\n        className,\n        size = 'normal',\n        color = 'default',\n        variant = 'default',\n        fullWidth = false,\n        isShowSpinner,\n        ...props\n    },\n\n    ref\n) => {\n    return (\n        <Component\n            ref={ref}\n            className={\n                cx(css.button, size, `color-${color}`, `variant-${variant}`, className, {'full-width': fullWidth})\n            }\n\n            {...props}\n        >\n            {isShowSpinner && <Spinner className={css.spinner} color=\"white\" isShown />}\n            {children}\n        </Component>\n    );\n});\n\nexport default Button;\n","// @flow\n\nimport React from 'react';\nimport cx from 'classnames';\nimport css from './styles.module.css';\n\ntype Props = {\n    className?: string,\n    onChange?: Function,\n    value?: boolean,\n    appearance: 'checkbox' | 'switcher',\n    align: 'left' | 'right',\n    label?: string,\n    onLabel?: string,\n    offLabel?: string,\n    children?: any,\n}\n\nconst CheckboxField = ({\n    className,\n    value,\n    disabled,\n    appearance = 'checkbox',\n    align = 'left',\n    label,\n    onLabel,\n    offLabel,\n    children,\n    ...props\n}: Props) => {\n    return (\n        <label className={cx(css.checkbox, className, appearance, align, {disabled})}>\n            <div>\n                <input\n                    type=\"checkbox\"\n                    checked={value}\n                    {...props}\n                />\n\n                {offLabel && <span\n                    className={cx(css['toggle-label'], 'off')}\n                    dangerouslySetInnerHTML={{__html: offLabel}}\n                />}\n\n                <div className={css.wrapper}>\n                    <div className={cx(css.mark, 'mdi', 'mdi-check', {'toggle-color': !(onLabel && offLabel)})} />\n                </div>\n\n                {onLabel && <span\n                    className={cx(css['toggle-label'], 'on')}\n                    dangerouslySetInnerHTML={{__html: onLabel}}\n                />}\n\n                {label && <span className={css.label}>{label}</span>}\n            </div>\n\n            {children}\n        </label>\n    );\n};\n\nexport default CheckboxField;\n","// @flow\n\nimport React, {useState} from 'react';\nimport cx from 'classnames';\nimport copy from 'copy-to-clipboard';\nimport {useTranslation} from 'react-i18next';\nimport css from './styles.module.css';\n\ntype Props = {\n    children?: Function,\n    className?: string,\n    copyText: string,\n    buttonTitle?: string,\n    successMessage?: string,\n};\n\nconst Copy = ({children, className, copyText, successMessage, buttonTitle}: Props) => {\n    const {t} = useTranslation();\n    const [isShowMessage, setIsShowMessage] = useState(false);\n\n    const onCLick = () => {\n        copy(copyText);\n        setIsShowMessage(true);\n        setTimeout(() => setIsShowMessage(false), 3000);\n    };\n\n    return <div className={cx(css.copy, className)}>\n        {children\n            ? children({onClick: onCLick})\n            : (\n                <div className={css.button} onClick={onCLick}>\n                    <span className={cx(css.icon, 'mdi mdi-content-copy')} />\n\n                    {buttonTitle\n                        ? buttonTitle\n                        : t('copy')\n                    }\n                </div>\n            )\n        }\n\n        <div className={cx(css.message, {'is-show': isShowMessage})}>\n            {successMessage\n                ? successMessage\n                : t('copied')\n            }\n        </div>\n    </div>;\n};\n\nexport default Copy;\n","// @flow\n\nimport React from 'react';\nimport Highlight from 'react-highlight.js';\nimport {useTranslation} from 'react-i18next';\nimport Copy from '../Copy';\nimport cx from 'classnames';\nimport './theme.css';\nimport css from './styles.module.css';\n\ntype Props = {\n    className?: string,\n    language: string,\n    children: string,\n    fontSize?: string | number\n};\n\nconst CodeViewer = ({className, language, children, fontSize}: Props) => {\n    const {t} = useTranslation();\n\n    return (\n        <div className={cx(css.code, className, fontSize && `font-size-${fontSize}`)}>\n            <Highlight language={language}>\n                {children}\n            </Highlight>\n\n            <Copy\n                className={css.copy}\n                copyText={children}\n                successMessage={t('snippetIsCopied')}\n            />\n        </div>\n    );\n};\n\nexport default CodeViewer;\n","// @flow\nimport React, {useState, useEffect, useRef} from 'react';\nimport cx from 'classnames';\nimport RcTooltip from 'rc-tooltip';\nimport css from './styles.module.css';\n\ntype Item = {\n    title: string,\n    onClick?: Function,\n}\n\ntype Props = {\n    children?: Function,\n    className?: string,\n    buttonClassName?: string,\n    items: Array<Item>\n}\n\nconst Dropdown = ({className, buttonClassName, children, items}: Props) => {\n    const [isShow, setIsShow] = useState(false);\n    const buttonRef = useRef(null);\n    const dropdownRef = useRef(null);\n\n    useEffect(() => {\n        document.body.addEventListener('click', outlineClickHandle);\n        return () => document.body.removeEventListener('click', outlineClickHandle);\n    });\n\n    const outlineClickHandle = (event: SyntheticEvent<HTMLBodyElement>) => {\n        let targetElement = event.target;\n\n        do {\n            if (targetElement === buttonRef.current || targetElement === dropdownRef.current)\n                return;\n\n            targetElement = targetElement.parentNode;\n        } while (targetElement);\n\n        if (isShow)\n            setIsShow(false);\n    };\n\n    const onCLickButton = (event: SyntheticEvent<HTMLButtonElement>) => {\n        clickStopPropagation(event);\n        setIsShow(!isShow);\n    };\n\n    const clickStopPropagation = (event: SyntheticEvent<HTMLButtonElement>) => {\n        event.stopPropagation();\n        event.preventDefault();\n    };\n\n    const onCLickItem = (item: Item) => () => {\n        setIsShow(!isShow);\n\n        if (item.onClick)\n            item.onClick();\n    };\n\n    return (\n        <div className={cx(css.dropdown, className, {active: isShow})}>\n            <RcTooltip\n                arrowContent={null}\n                visible={isShow}\n                placement=\"bottomRight\"\n                destroyTooltipOnHide\n                align={{offset: [0, 0]}}\n\n                overlay={\n                    <div\n                        className={cx(css.menu, 'show')}\n                        ref={dropdownRef}\n                        onClick={clickStopPropagation}\n                    >\n                        {items.map((i, index) => <div\n                            key={index}\n                            className={css.item}\n                            onClick={onCLickItem(i)}\n                        >\n                            {i.title}\n                        </div>)}\n                    </div>\n                }\n            >\n                {children\n                    ? React.cloneElement(children, {\n                        onClick: onCLickButton,\n                        ref: buttonRef,\n                    })\n                    : <div ref={buttonRef} className={cx(css.button, buttonClassName)} onClick={onCLickButton}>\n                        <span className=\"mdi mdi-dots-vertical\" />\n                    </div>\n                }\n            </RcTooltip>\n        </div>\n    );\n};\n\nexport default Dropdown;\n","const unicodeBase64Decode = text => {\n    try {\n        const decodeData = window.atob(text);\n\n        return decodeURIComponent(Array.prototype.map.call(decodeData, c => {\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n        }).join(''));\n    } catch (e) {\n        return null;\n    }\n};\n\nexport default unicodeBase64Decode;","const formatBytes = (bytes, decimals) => {\n    if (bytes === 0) return '0 Bytes';\n    \n    let k = 1024;\n\n    let dm = decimals <= 0 ? 0 : decimals || 2;\n\n    let sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n    let i = Math.floor(Math.log(bytes) / Math.log(k));\n    \n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n};\n\nexport default formatBytes;","// @flow\nimport React, {useEffect, useRef, useState} from 'react';\nimport cx from 'classnames';\nimport {useTranslation} from 'react-i18next';\nimport {formatBytes} from '../utils';\nimport css from './style.module.css';\n\ntype Props = {\n    formats?: Array<string>,\n    className?: string,\n    loading?: boolean,\n    progressPercent?: ?number,\n    onChange?: Function,\n}\n\nconst FileDragnDrop = ({\n    formats,\n    className,\n    loading,\n    progressPercent = null,\n    onChange,\n}: Props) => {\n    const {t} = useTranslation();\n    const inputRef = useRef(null);\n    const [active, setActive] = useState(false);\n    const [selectedFile, setSelectedFile] = useState();\n    const isDidMount = useRef(true);\n\n    useEffect(() => {\n        if (!isDidMount.current) {\n            if (onChange)\n                onChange(selectedFile);\n        } else\n            isDidMount.current = false;\n    }, [selectedFile]);\n\n    const onClick = event => {\n        event.preventDefault();\n\n        if (inputRef.current)\n            inputRef.current.click();\n    };\n\n    const preventStop = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    const onDrop = event => {\n        preventStop(event);\n        setActive(false);\n\n        const [file] = event.dataTransfer.files;\n\n        if (file && checkAvailableExtension(file))\n            setSelectedFile(file);\n    };\n\n    const onDragEnter = event => {\n        preventStop(event);\n        setActive(true);\n\n    };\n\n    const onDragLeave = event => {\n        preventStop(event);\n        setActive(false);\n    };\n\n    const onChangeInput = event => {\n        const [file] = event.target.files;\n\n        if (file && checkAvailableExtension(file))\n            setSelectedFile(file);\n    };\n\n    const removeFile = () => {\n        setSelectedFile(null);\n    };\n\n    const checkAvailableExtension = file => {\n        const ext = '.' + file.name.split('.').pop();\n\n        let isAvailable;\n\n        if (formats && formats.length)\n            isAvailable = formats.some(format => {\n                if (format === '.jpg' || format === '.jpeg')\n                    return ext === '.jpg' || ext === '.jpeg';\n                else\n                    return format === ext;\n            });\n        else\n            isAvailable = true;\n\n        return isAvailable;\n    };\n\n    if (loading)\n        return (\n            <div className={cx(css.dnd, className, {active})}>\n                <div className={css.loading}>\n                    {t('Uploading')}&hellip;\n                    {typeof progressPercent === 'number' && `${progressPercent}%`}\n                </div>\n\n                {typeof progressPercent === 'number' &&  (\n                    <div className={css.progressBar}>\n                        <div className={css.progress} style={{width: `${progressPercent}%`}} />\n                    </div>\n                )}\n            </div>\n        );\n\n    if (selectedFile)\n        return <div className={cx(css.file, className)}>\n            <div className={css.fileExtend}>\n                .csv\n            </div>\n\n            <div className={css.fileSection}>\n                <div className={css.fileName}>{selectedFile.name}</div>\n                <div className={css.fileSize}>{formatBytes(selectedFile.size)}</div>\n            </div>\n\n            <div onClick={removeFile} className={cx(css.fileRemove, 'mdi mdi-close')} />\n        </div>;\n\n\n    return (\n        <div\n            className={cx(css.dnd, className, {active})}\n            onDrop={onDrop}\n            onDragEnter={onDragEnter}\n            onDragOver={onDragEnter}\n            onDragLeave={onDragLeave}\n        >\n            <input\n                ref={inputRef}\n                onChange={onChangeInput}\n                type=\"file\"\n            />\n\n            <div className={css.placeholder}>\n                {t('dragHereAFile')}\n                {''}\n                {Boolean(formats) && `(${formats.join(', ')})`}\n                {' '}\n                {t('or')}\n                {' '}\n                <a onClick={onClick} href=\"#\">{t('upload')}</a>\n                {' '}\n                {t('fromYourComputer')}.\n            </div>\n        </div>\n    );\n};\n\nexport default FileDragnDrop;\n","// @flow\n\nimport React from 'react';\nimport css from './styles.module.css';\n\ntype Props = {}\n\nconst Loader = ({}: Props) => {\n    return (\n        <div className={css.loader}>\n            <div className={css.text} />\n\n            <div className={css.grid}>\n                <div className={css.item}>\n                    <div className={css.pic} />\n                    <div className={css.section} />\n                </div>\n\n                <div className={css.item}>\n                    <div className={css.pic} />\n                    <div className={css.section} />\n                </div>\n\n                <div className={css.item}>\n                    <div className={css.pic} />\n                    <div className={css.section} />\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Loader;\n","// @flow\nimport React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport MathJax from 'react-mathjax';\nimport RemarkMathPlugin from 'remark-math';\n\nconst MarkdownRender = props => {\n    const newProps = {\n        ...props,\n        plugins: [\n            RemarkMathPlugin,\n        ],\n\n        renderers: {\n            ...props.renderers,\n            math: props =>\n                <MathJax.Node formula={props.value} />,\n            inlineMath: props =>\n                <MathJax.Node inline formula={props.value} />,\n        },\n    };\n\n    return (\n        <MathJax.Provider input=\"tex\">\n            <ReactMarkdown {...newProps} />\n        </MathJax.Provider>\n    );\n};\n\nexport default MarkdownRender;","// @flow\n\nimport React from 'react';\nimport type {Node} from 'react';\nimport {Portal} from 'react-portal';\nimport cx from 'classnames';\nimport css from './styles.module.css';\n\ntype Props = {\n    title?: string,\n    isShow?: boolean,\n    className?: string,\n    dialogClassName?: string,\n    size?: 'confirmation' | 'small' | 'big',\n    onClose: Function,\n    children?: Node,\n    withCloseButton?: boolean,\n};\n\nconst Modal = ({\n    title,\n    className,\n    dialogClassName,\n    size = 'big',\n    onClose,\n    isShow,\n    children,\n    withCloseButton,\n}: Props) => {\n    const onClickByLayer = event => {\n        if (event.currentTarget === event.target && onClose)\n            onClose();\n    };\n\n    return (\n        <Portal>\n            <div className={cx(css.modal, className, {show: isShow})} onClick={onClickByLayer}>\n                <div className={cx(css.dialog, size, dialogClassName)}>\n                    {withCloseButton && <span className={cx(css.close, 'mdi mdi-close')} onClick={onClose} />}\n\n                    {title && <div className={css.title}>{title}</div>}\n                    {children}\n                </div>\n            </div>\n        </Portal>\n    );\n};\n\nexport default Modal;\n","export default {\n    // API_URL: '/api',\n    API_URL: 'https://api.stgn.dstack.ai',\n\n    GA_ID: '',\n    DOCS_URL: 'http://docs.dstack.ai',\n\n    LOGIN_URL: '/users/login',\n    VERIFY_EMAIL_URL: '/users/verify',\n\n    USER_DATA_URL: '/users/remember',\n    UPDATE_TOKEN_URL: '/users/update/token',\n    UPDATE_SETTINGS_URL: '/users/update/settings',\n    CHECK_USER: userName => `/users/exists/${userName}`,\n\n    STACKS_LIST: userName => `/stacks/${userName}`,\n    DELETE_STACK: () => '/stacks/delete',\n    STACK_DETAILS: (userName, stack) => `/stacks/${userName}/${stack}`,\n    STACK_FRAME: (userName, stack, frameId) => `/frames/${userName}/${stack}/${frameId}`,\n    STACK_ATTACHMENT: (stack, frameId, id) => `/attachs/${stack}/${frameId}/${id}`,\n    STACK_UPDATE: '/stacks/update',\n    STACK_PUSH: '/stacks/push',\n\n    DASHBOARD_LIST: userName => `/dashboards/${userName}`,\n    DASHBOARD_DETAILS: (userName, id) => `/dashboards/${userName}/${id}`,\n    DASHBOARD_CREATE: '/dashboards/create',\n    DASHBOARD_UPDATE: '/dashboards/update',\n    DASHBOARD_DELETE: '/dashboards/delete',\n    DASHBOARD_CARDS_INSERT: '/dashboards/cards/insert',\n    DASHBOARD_CARDS_UPDATE: '/dashboards/cards/update',\n    DASHBOARD_CARDS_DELETE: '/dashboards/cards/delete',\n\n    DISCORD_URL: 'https://discord.gg/8xfhEYa',\n    TWITTER_URL: 'https://twitter.com/dstackai',\n    GITHUB_URL: ' https://github.com/dstackai',\n    MEDIUM_URL: ' https://medium.com/dstackai',\n\n    CONFIGURE_PYTHON_COMMAND: (token = '<token>', userName = '<username>') => {\n        const origin = window ? window.location.origin : '';\n\n        return `dstack config --token ${token} --user ${userName} --server ${origin}/api`;\n    },\n\n    CONFIGURE_R_COMMAND: (token = '<token>', userName = '<username>') => {\n        const origin = window ? window.location.origin : '';\n\n        return `dstack::configure(user = \"${userName}\", token = \"${token}\", persist = \"global\"`\n            + `, server = \"${origin}/api\")`;\n    },\n};\n","// @flow\nimport React from 'react';\nimport {useTranslation} from 'react-i18next';\nimport config from '../config';\nimport image from './404.svg';\nimport css from './style.module.css';\n\nconst NotFound = ({children}) => {\n    const {t} = useTranslation();\n\n    return (\n        <div className={css['not-found']}>\n            <img src={image} alt=\"\" width=\"224\" height=\"77\" />\n\n            {children && (\n                <div className={css.message}>\n                    {children}\n                </div>\n            )}\n\n            <div className={css.help}>\n                {t('needHelpWWriteToUsOn')}\n                {' '}\n                <a target=\"_blank\" href={config.TWITTER_URL}><span className=\"mdi mdi-twitter\" /> Twitter</a>\n                {', '}\n                <a target=\"_blank\" href={config.GITHUB_URL}><span className=\"mdi mdi-github-circle\" />GitHub</a>\n                {' '}\n                {t('or')}\n                {' '}\n                <a target=\"_blank\" href={config.DISCORD_URL}><span className=\"mdi mdi-discord\" />Discord</a>\n            </div>\n        </div>\n    );\n};\n\nexport default NotFound;\n","import {useEffect, useRef} from 'react';\n\nexport default value => {\n    const ref = useRef(value);\n\n    useEffect(() => {\n        ref.current = value;\n    }, [value]);\n\n    return ref.current;\n};\n","// @flow\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\nimport cx from 'classnames';\nimport {usePrevious} from '../hooks';\nimport css from './styles.module.css';\n\ntype Props = {\n    className?: string,\n    isActive: ?boolean,\n}\n\nconst ProgressBar = ({className, isActive, progress: globalProgress}: Props) => {\n    const [progress, setProgress] = useState(0);\n    const [width, setWidth] = useState(1000);\n    const prevIsActive = usePrevious(isActive);\n    const step = useRef(0.01);\n    const currentProgress = useRef(0);\n    const requestFrame = useRef(null);\n    const ref = useRef(null);\n\n    useEffect(() => {\n        if (isActive) {\n            setProgress(0);\n            step.current = 0.01;\n            currentProgress.current = 0;\n            startCalculateProgress();\n        }\n\n        if (prevIsActive === true && isActive === false) {\n            if (requestFrame.current)\n                cancelAnimationFrame(requestFrame.current);\n\n            setProgress(100);\n            setTimeout(() => setProgress(0), 800);\n        }\n\n        if (isActive === null) {\n            if (requestFrame.current)\n                cancelAnimationFrame(requestFrame.current);\n\n            setProgress(0);\n        }\n    }, [isActive]);\n\n    useEffect(() => {\n        if (globalProgress !== null)\n            setProgress(globalProgress);\n        else {\n            setProgress(0);\n        }\n    }, [globalProgress]);\n\n    useEffect(() => {\n        window.addEventListener('resize', onResize);\n\n        if (ref.current)\n            setWidth(ref.current.offsetWidth);\n\n        return () => window.removeEventListener('resize', onResize);\n    }, []);\n\n    const startCalculateProgress = () => {\n        requestAnimationFrame(calculateProgress);\n    };\n\n    const calculateProgress = useCallback(() => {\n        currentProgress.current += step.current;\n        const progress = Math.round(Math.atan(currentProgress.current) / (Math.PI / 2) * 100 * 1000) / 1000;\n\n        setProgress(progress);\n\n        if (progress > 70)\n            step.current = 0.005;\n\n        if (progress >= 100)\n            cancelAnimationFrame(requestFrame.current);\n\n        requestFrame.current = requestAnimationFrame(calculateProgress);\n    }, [isActive]);\n\n    const onResize = () => {\n        if (ref.current)\n            setWidth(ref.current.offsetWidth);\n    };\n\n    return (\n        <div ref={ref} className={cx(css.bar, className)}>\n            <div\n                className={css.progress}\n                style={{\n                    width: `${progress}%`,\n                    backgroundSize: `${width}px 5px`,\n                }}\n            />\n        </div>\n    );\n};\n\nexport default ProgressBar;\n","// @flow\nimport React from 'react';\nimport cx from 'classnames';\nimport css from './styles.module.css';\n\ntype Props = {\n    size?: 'normal' | 'middle' | 'small',\n    label?: string,\n    className?: string,\n    errors?: Array<string>,\n}\n\nconst TextField = ({label, className, size = 'normal', errors = [], ...props}: Props) => {\n    const hasErrors = Boolean(errors.length);\n\n    return (\n        <div className={cx(css.field, className, size, {disabled: props.disabled})}>\n            <label>\n                {label && <div className={css.label}>{label}</div>}\n\n                <div className={css.input}>\n                    {/*$FlowFixMe*/}\n                    <input\n                        className={cx({error: hasErrors})}\n                        {...props}\n                    />\n                </div>\n\n                {hasErrors && <div className={css.error}>{errors.join(', ')}</div>}\n            </label>\n        </div>\n    );\n};\n\nexport default TextField;\n","// @flow\n\nimport React, {useState} from 'react';\nimport cx from 'classnames';\nimport TextField from '../TextField';\nimport css from './styles.module.css';\n\ntype Props = {\n    className?: string,\n    showEverything?: boolean,\n    isDark?: boolean,\n}\n\nconst SearchField = ({className, showEverything, isDark, ...props}: Props) => {\n    const [isShow, setIsShow] = useState(showEverything || (props.value && props.value.length));\n\n    const clear = () => {\n        if (props.onChange)\n            props.onChange('');\n\n        if (!showEverything)\n            setIsShow(false);\n    };\n\n    const onChangeHandle = (event:SyntheticEvent<HTMLInputElement>) => {\n        if (props.onChange)\n            props.onChange(event.target.value);\n    };\n\n    return (\n        <div className={cx(css.search, className, {'is-dark': isDark})}>\n            {isShow && <TextField\n                {...props}\n                onChange={onChangeHandle}\n                className={css.field}\n            />}\n\n            {isShow && Boolean(props.value && props.value.length) && (\n                <div className={css.clear} onClick={clear}>\n                    <span className=\"mdi mdi-close\" />\n                </div>\n            )}\n\n            {isShow && !Boolean(props.value && props.value.length) && (\n                <div className={css.clear}>\n                    <span className=\"mdi mdi-magnify\" />\n                </div>\n            )}\n\n            {!isShow && <div className={css.button} onClick={() => setIsShow(true)}>\n                <span className=\"mdi mdi-magnify\" />\n            </div>}\n        </div>\n    );\n};\n\nexport default SearchField;\n","// @flow\n\nimport React from 'react';\nimport cx from 'classnames';\nimport Select, {Option, OptGroup} from 'rc-select';\nimport CheckboxField from '../CheckboxField';\nimport css from './styles.module.css';\nimport './test.css';\n\nconst allValue = 'all';\n\ntype Props = {\n    className?: string,\n    disabled?: boolean,\n    placeholder?: string,\n    showSearch?: boolean,\n    value: Array<string>,\n    mode?: string,\n    align: 'left' | 'right' | 'bottom',\n    label?: string,\n\n    options: Array<{\n        value: string,\n        label: string,\n    }>,\n}\n\nconst SelectField = ({\n    align = 'left',\n    label,\n    disabled,\n    placeholder,\n    value: propValue = [],\n    className,\n    mode,\n    onChange,\n    options = [],\n    showSearch = true,\n    ...props\n}: Props) => {\n    const onChangeHandle = (value: Array<string>) => {\n        if (value.indexOf(allValue) >= 0)\n            if (value.length > options.length)\n                value = [];\n            else\n                value = options.map(o => o.value);\n\n        if (onChange)\n            onChange(value);\n    };\n\n    const onSelect = () => {};\n\n    const onDeselect = () => {};\n\n    const renderOptions = () => options.map(({value, label}) => (\n        <Option key={value} value={value}>\n            {mode === 'multiple' && <CheckboxField\n                readOnly\n                className=\"select-field-item-option-checkbox\"\n                value={propValue.indexOf(value) >= 0}\n            />}\n\n            <span className=\"select-field-item-option-label\">{label}</span>\n        </Option>\n    ));\n\n    return (\n        <div className={cx(css.field, className, align, {disabled})}>\n            <Select\n                value={propValue}\n                // animation={useAnim ? 'slide-up' : null}\n                // choiceTransitionName=\"rc-select-selection__choice-zoom\"\n                prefixCls=\"select-field\"\n                multiple={mode === 'multiple'}\n                showArrow\n                showSearch={showSearch}\n                onSelect={onSelect}\n                onDeselect={onDeselect}\n                placeholder={placeholder}\n                onChange={onChangeHandle}\n                inputIcon={<span className=\"mdi mdi-chevron-down\" />}\n                {...props}\n            >\n                {options.length && mode === 'multiple' && <Option key={allValue} value={allValue}>\n                    <CheckboxField\n                        readOnly\n                        className=\"select-field-item-option-checkbox\"\n                        value={propValue.length === options.length}\n                    />\n\n                    <span className=\"select-field-item-option-label\">Select all</span>\n                </Option>}\n\n                {mode === 'multiple'\n                    ? <OptGroup>{renderOptions()}</OptGroup>\n                    : renderOptions()\n                }\n            </Select>\n\n            {label && <label className={css.label}>{label}</label>}\n        </div>\n    );\n};\n\nexport default SelectField;\n","// @flow\n\nimport React from 'react';\nimport cx from 'classnames';\nimport Slider from 'rc-slider';\nimport css from './styles.module.css';\nimport './test.css';\n\ntype Props = {\n    name?: string,\n    label?: string,\n    className?: string,\n    align: 'left' | 'right',\n};\n\nconst CustomHandle = props => {\n    const style = {\n        left: props.offset + '%',\n        transform: 'translateX(-50%)',\n    };\n\n    return (\n        <div className={props.className} key={props.index} style={style} data-value={props.value} />\n    );\n};\n\nconst SliderField = ({className, disabled, label, onChange, name, align = 'left', ...props}: Props) => {\n    const onChangeHandle = value => {\n        if (onChange)\n            onChange({\n                target: {\n                    value,\n                    name,\n                },\n            });\n    };\n\n    return (\n        <div className={cx(css.field, className, align, {disabled})}>\n            <div className={css.slider}>\n                <Slider\n                    onChange={onChangeHandle}\n                    tipFormatter={value => `$${value}`}\n                    handle={CustomHandle}\n                    {...props}\n                />\n            </div>\n\n            {label && <span className={css.label}>{label}</span>}\n        </div>\n    );\n};\n\nexport default SliderField;\n","// @flow\nimport React from 'react';\nimport cx from 'classnames';\nimport SelectField from '../SelectField'\nimport CheckboxField from '../CheckboxField'\nimport SliderField from '../SliderField'\nimport css from './styles.module.css';\n\ntype Props = {\n    fields: {},\n    form: {},\n    onChange: Function,\n    className?: string, \n}\n\nconst StackFilters = ({className, fields, form, onChange}: Props) => {\n    return (\n        <div className={cx(css.filters, className)}>\n            {Object.keys(fields).map(key => {\n                switch (fields[key].type) {\n                    case 'select':\n                        return <SelectField\n                            key={`select-${key}`}\n                            align=\"bottom\"\n                            className={cx(css.field, css.select)}\n                            onChange={value => onChange(key, value)}\n                            label={key}\n                            name={key}\n                            options={fields[key].options}\n                            value={Array.isArray(form[key]) ? form[key] : [form[key]]}\n                        />;\n\n                    case 'checkbox':\n                        return <CheckboxField\n                            key={`checkbox-${key}`}\n                            className={css.field}\n                            onChange={onChange}\n                            label={key}\n                            name={key}\n                            value={form[key]}\n                        />;\n\n                    case 'slider':\n                        return <SliderField\n                            key={`slider-${key}`}\n                            className={css.field}\n                            onChange={onChange}\n                            align=\"right\"\n                            label={key}\n                            name={key}\n                            value={form[key]}\n                            step={null}\n                            min={fields[key].min}\n                            max={fields[key].max}\n                            marks={fields[key].options}\n                        />;\n\n                    default:\n                        return null;\n                }\n            })}\n        </div>\n    );\n};\n\nexport default StackFilters;","// @flow\nimport React from 'react';\nimport cx from 'classnames';\nimport css from './styles.module.css';\n\ntype Props = {\n    className?: string,\n    value?: ?string,\n    placeholder?: string,\n}\n\nconst StretchTitleField = ({\n    value,\n    placeholder = '',\n    className,\n    ...props\n}: Props) => {\n    return (\n        <div className={cx(css.field, className)}>\n            <input\n                type=\"text\"\n                placeholder={placeholder}\n                value={value}\n                {...props}\n            />\n\n            <div className={css.hidden}>\n                {value.length ? value : placeholder}\n            </div>\n        </div>\n    );\n};\n\nexport default StretchTitleField;\n","// @flow\n\nimport React from 'react';\nimport {useTranslation} from 'react-i18next';\nimport cx from 'classnames';\nimport css from './styles.module.css';\n\ntype Value = string | number;\n\ntype Props = {\n    className?: string,\n    value: Value,\n    onChange: Function,\n\n    tabs: Array<{\n        label: string,\n        value: Value,\n    }>,\n}\n\nconst Tabs = ({className, value, tabs, onChange}: Props) => {\n    const {t} = useTranslation();\n\n    return (\n        <div className={cx(css.tabs, className)}>\n            {tabs.map((i, index) => (\n                <div\n                    key={index}\n                    className={cx(css.tab, {active: value === i.value})}\n                    onClick={() => onChange(i.value)}\n                >\n                    {i.label}\n                    {i.soon && <span className={css.soon}>{t('soon')}</span>}\n                </div>\n            ))}\n        </div>\n    );\n};\n\nexport default Tabs;\n","// @flow\nimport React from 'react';\nimport cx from 'classnames';\nimport css from './styles.module.css';\n\ntype Props = {\n    size?: 'normal' | 'small',\n    label?: string,\n    className?: string,\n    errors?: Array<string>,\n}\n\nconst TextAreaField = ({label, className, size = 'normal', errors = [], ...props}: Props) => {\n    const hasErrors = Boolean(errors.length);\n\n    return (\n        <div className={cx(css.field, className, size, {disabled: props.disabled})}>\n            <label>\n                {label && <div className={css.label}>{label}</div>}\n\n                <div className={css.textarea}>\n                    {/*$FlowFixMe*/}\n                    <textarea\n                        className={cx({error: hasErrors})}\n                        {...props}\n                    />\n                </div>\n\n                {hasErrors && <div className={css.error}>{errors.join(', ')}</div>}\n            </label>\n        </div>\n    );\n};\n\nexport default TextAreaField;\n","// @flow\nimport React from 'react';\nimport RcTooltip from 'rc-tooltip';\nimport css from './style.module.css';\n\ntype Props = {\n    children: any,\n    overlayContent?: any,\n    arrowContent?: any,\n}\n\nconst Tooltip = ({\n    children,\n    overlayContent,\n    arrowContent = null,\n    placement = 'bottomLeft',\n    trigger = ['hover'],\n    overlayStyle = {'pointer-events': 'none'},\n    ...props\n}: Props) => {\n\n    return (\n        <RcTooltip\n            overlayStyle={overlayStyle}\n            arrowContent={arrowContent}\n            placement={placement}\n            trigger={trigger}\n            overlay={\n                <div className={css.tooltip}>{overlayContent}</div>\n            }\n            {...props}\n        >\n            {children}\n        </RcTooltip>\n    );\n};\n\nexport default Tooltip;\n","// @flow\nimport React, {useEffect, useState} from 'react';\nimport cx from 'classnames';\nimport css from './styles.module.css';\n\ntype Props = {\n    value?: 'grid' | 'list',\n    onChange?: Function,\n    className?: string,\n}\n\nconst ViewSwitcher = ({value = 'grid', onChange, className}: Props) => {\n    const [stateValue, setStateValue] = useState(value);\n\n    useEffect(() => {\n        if (value !== stateValue)\n            setStateValue(value);\n\n    }, [value]);\n\n    const toggleValue = () => {\n        const newValue = stateValue === 'grid' ? 'list' : 'grid';\n\n        setStateValue(newValue);\n\n        if (onChange)\n            onChange(newValue);\n    };\n\n    return (\n        <div\n            className={cx(css.switcher, stateValue, className)}\n            onClick={toggleValue}\n        >\n            <span className=\"mdi mdi-view-grid\" />\n            <span className=\"mdi mdi-view-list\" />\n        </div>\n    );\n};\n\nexport default ViewSwitcher;","import React from 'react';\nimport {Portal} from 'react-portal';\n\nconst Yield = ({name, className, children}) => {\n    if (!name)\n        return null;\n\n    if (children)\n        return (\n            <Portal node={document && document.getElementById(name)}>\n                {children}\n            </Portal>\n        );\n\n    return (\n        <div className={className} id={name} />\n    );\n};\n\nexport default Yield;","// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","\nimport React from 'react';\nimport css from './styles.module.css';\n\ntype Props = {\n    data: Array<Array<string>>,\n}\n\nconst Table = ({data}: Props) => {\n    const [captions, ...rows] = data;\n\n    return (\n        <div className={css.table}>\n            <table>\n                <thead>\n                    <tr>\n                        {captions.map(caption => (\n                            <th key={caption}>{caption}</th>\n                        ))}\n                    </tr>\n                </thead>\n\n                <tbody>\n                    {rows.map((row, index) => (\n                        <tr key={index}>\n                            {row.map((cell, i) => (\n                                <td key={i}>{cell}</td>\n                            ))}\n                        </tr>\n                    ))}\n                </tbody>\n            </table>\n        </div>\n    );\n};\n\nexport default Table;\n","import axios from 'axios';\nimport {get as _get} from 'lodash-es';\nimport config from './config';\n\nexport const CancelToken = axios.CancelToken;\n\nconst instance = axios.create({\n    baseURL: config.API_URL,\n    crossDomain: true,\n});\n\ninstance.interceptors.request.use(config => {\n    const token = localStorage.getItem('token');\n\n    config.headers.Authorization = token ? `Bearer ${token}` : '';\n    return config;\n});\n\ninstance.interceptors.response.use(\n    response => {\n        return response;\n    },\n    error => {\n        if (_get(error, 'response.status', null) === 401) {\n            return Promise.reject(error.response);\n        } else if (_get(error, 'response.status', null) === 400) {\n            return Promise.reject(error.response);\n        } else {\n            return Promise.reject(error);\n        }\n    }\n);\n\nexport default instance;\n","export default {\n    FETCH: 'stacks/attachments/FETCH',\n    FETCH_SUCCESS: 'stacks/attachments/FETCH_SUCCESS',\n    FETCH_FAIL: 'stacks/attachments/FETCH_FAIL',\n};\n","import React, { createContext, useReducer, useContext } from \"react\";\nimport actionsTypes from \"./actionsTypes\";\n\nconst initialState = {\n  data: {},\n  errors: {},\n  requestStatus: null,\n};\n\nexport const reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case (actionsTypes.FETCH):\n      return {\n        ...state,\n        data: {\n          ...state.data,\n          [action.meta.frameId]: {\n            ...state.data[action.meta.frameId],\n\n            [action.meta.id]: {\n              ...(\n                state.data[action.meta.frameId]\n                  ? state.data[action.meta.frameId][action.meta.id]\n                  : {}\n              ),\n\n              loading: true,\n              requestStatus: null,\n              error: null,\n            },\n          },\n        },\n      };\n\n    case (actionsTypes.FETCH_SUCCESS):\n      return {\n        ...state,\n        data: {\n          ...state.data,\n\n          [action.meta.frameId]: {\n            ...state.data[action.meta.frameId],\n\n            [action.meta.id]: {\n              ...action.payload,\n              loading: false,\n            },\n          },\n        },\n      };\n\n    case (actionsTypes.FETCH_FAIL):\n      return {\n        ...state,\n\n        data: {\n          ...state.data,\n          [action.meta.frameId]: {\n            ...state.data[action.meta.frameId],\n\n            [action.meta.id]: {\n              error: action.payload.error,\n              requestStatus: action.payload.requestStatus,\n              loading: false,\n            },\n          },\n        },\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const StateContext = createContext();\n\nexport const StateProvider = ({ children }) => (\n  <StateContext.Provider value={useReducer(reducer, initialState)}>\n    {children}\n  </StateContext.Provider>\n);\n\nexport const useStateValue = () => useContext(StateContext);\n","import api from 'api';\nimport {get as _get} from 'lodash-es';\nimport actionsTypes from './actionsTypes';\nimport config from '../../config';\nimport {useStateValue} from './store';\n\nexport default () => {\n    const [, dispatch] = useStateValue();\n\n    const fetchAttachment = async (stack, frameId, id, onSuccess) => {\n        dispatch({\n            type: actionsTypes.FETCH,\n            meta: {frameId, id},\n        });\n\n        try {\n            const request = await api.get(config.STACK_ATTACHMENT(stack, frameId, id));\n\n            dispatch({\n                type: actionsTypes.FETCH_SUCCESS,\n                meta: {frameId, id},\n                payload: request.data.attachment,\n            });\n\n            if (onSuccess)\n                onSuccess();\n        } catch (e) {\n            let error = 'Unknown error';\n\n            try {\n                error = JSON.parse(_get(e, 'request.response')).message;\n            } catch (e) {\n                console.log(error);\n            }\n\n            dispatch({\n                type: actionsTypes.FETCH_FAIL,\n                meta: {frameId, id},\n                payload: {error},\n            });\n        }\n    };\n\n    return {fetchAttachment};\n};\n","import React, {useEffect, useRef, useState} from 'react';\nimport cx from 'classnames';\nimport {get, isEqual} from 'lodash-es';\nimport {useTranslation} from 'react-i18next';\nimport Plot from 'react-plotly.js';\nimport * as CSV from 'csv-string';\nimport Table from './Table';\nimport config from '../../config';\nimport api from '../../api';\nimport {StateProvider} from './store';\nimport {useIntersectionObserver, usePrevious} from 'hooks';\nimport actions from './actions';\nimport {useStateValue} from './store';\nimport {unicodeBase64Decode} from '../../utils';\nimport css from './styles.module.css';\n\ntype Props = {\n    id: number,\n    frameId: string,\n    stack: string,\n    className?: string,\n    withLoader?: boolean,\n}\n\nconst base64ToJSON = (base64: string) => {\n    let parsedJSON;\n\n    try {\n        parsedJSON = JSON.parse(atob(base64));\n    } catch (e) {\n        console.log(e);\n    }\n\n    return parsedJSON;\n};\n\nconst base64ImagePrefixes = {\n    'image/svg+xml': 'data:image/svg+xml;charset=utf-8;',\n    'image/png': 'data:image/png;charset=utf-8;',\n    'image/jpeg': 'data:image/jpeg;charset=utf-8;',\n};\n\nconst isImageType = type => /^image/.test(type);\n\nconst Attachment = ({\n    id,\n    className,\n    frameId,\n    isList,\n    withLoader,\n    stack,\n}: Props) => {\n    const {t} = useTranslation();\n    const {fetchAttachment} = actions();\n    const [{data}] = useStateValue();\n    const {loading, error, requestStatus, ...attachment} = get(data, `${frameId}.${id}`, {});\n    const [tableScale, setTableScale] = useState(1);\n    const [loadingFullAttachment, setLoadingFullAttachment] = useState(false);\n    const [fullAttachment, setFullAttachment] = useState(null);\n    const viewRef = useRef(null);\n    const prevAttachment = usePrevious(attachment);\n\n    useEffect(() => {\n        if (window && isList)\n            window.addEventListener('resize', onResizeCard);\n\n        return () => {\n            if (window && isList)\n                window.removeEventListener('resize', onResizeCard);\n        };\n    }, []);\n\n    const fetchFullAttachment = async () => {\n        setLoadingFullAttachment(true);\n\n        try {\n            const url = config.STACK_ATTACHMENT(stack, frameId, id) + '?download=true';\n            const {data} = await api.get(url);\n\n            setFullAttachment(data.attachment);\n        } catch (e) {\n            console.log(e);\n        }\n\n        setLoadingFullAttachment(false);\n    };\n\n    useEffect(() => {\n        if (!isList && attachment\n            && !isEqual(prevAttachment, attachment)\n            && attachment.preview\n            && isImageType(attachment['content_type'])\n        ) {\n            fetchFullAttachment();\n        }\n    }, [data]);\n\n    useEffect(() => {\n        if (!isList\n            && (typeof id === 'number' && frameId)\n            && ((!attachment.data && !error) || (attachment?.index !== id))\n        ) {\n            fetchAttachment(stack, frameId, id);\n        }\n    }, [id, frameId]);\n\n    const [ref] = useIntersectionObserver(() => {\n        if (isList && !loading && (\n            (!attachment.data && !error)\n            || (attachment.data && attachment.index !== id)\n        ))\n            fetchAttachment(stack, frameId, id);\n    }, {}, [id, frameId, data]);\n\n    useEffect(() => {\n        if (attachment && attachment['application'] === 'bokeh' && Bokeh) {\n            const json = base64ToJSON(attachment.data);\n\n            if (json && document.querySelector(`#bokeh-${frameId}`))\n                Bokeh.embed.embed_item(json, `bokeh-${frameId}`);\n        }\n\n        if (isList)\n            setTimeout(() => onResizeCard(), 10);\n\n    }, [data]);\n\n    const onResizeCard = () => {\n        if (ref.current && viewRef.current) {\n            const containerWidth = ref.current.offsetWidth;\n            const viewWidth = viewRef.current.offsetWidth / tableScale;\n\n            let newScale = containerWidth / viewWidth;\n\n            if (newScale > 1)\n                newScale = 1;\n\n            setTableScale(newScale);\n        }\n    };\n\n    const renderImage = () => {\n        if (!attachment.preview)\n            return (\n                <img\n                    src={`${base64ImagePrefixes[attachment['content_type']]}base64,${attachment.data}`}\n                    alt=\"\"\n                />\n            );\n        else if (fullAttachment) {\n            if (fullAttachment['download_url']) {\n                return (\n                    <img src={fullAttachment['download_url']} alt=\"\"/>\n                );\n            } else\n                return (\n                    <img\n                        src={`${base64ImagePrefixes[attachment['content_type']]}base64,${attachment.data}`}\n                        alt=\"\"\n                    />\n                );\n        }\n\n        return null;\n    };\n\n    const renderCSV = () => {\n        const decodeCSV = unicodeBase64Decode(attachment.data);\n\n        if (decodeCSV) {\n            const data = CSV.parse(decodeCSV);\n\n            if (Array.isArray(data) && data.length)\n                return (\n                    <Table\n                        data={data}\n                    />\n                );\n        }\n\n        return (\n            <div className={css.text}>{t('notSupportedAttachment')}</div>\n        );\n    };\n\n    const renderPlotly = () => {\n        const json = base64ToJSON(attachment.data);\n\n        if (!json)\n            return null;\n\n        json.layout.width = '100%';\n        json.layout.margin = 0;\n        json.layout.autosize = true;\n        json.config = {responsive: true};\n\n        return (\n            <Plot\n                {...json}\n                style={{\n                    width: '100%',\n                    height: '100%',\n                }}\n                useResizeHandler\n            />\n        );\n    };\n\n    const renderBokeh = () => <div id={`bokeh-${frameId}`} />;\n\n    const renderAttachment = () => {\n        if (loading)\n            return null;\n\n        if (requestStatus === 404 && isList)\n            return <div className={css.message}>{t('notFound')}</div>;\n\n        if (requestStatus === 404 && !isList)\n            return <div className={css.text}>{t('noPreview')}</div>;\n\n        if (attachment.preview && isList && isImageType(attachment['content_type']))\n            return <div className={css.message}>{t('noPreview')}</div>;\n\n        switch (true) {\n            case (attachment['content_type'] === 'image/svg+xml'):\n            case (attachment['content_type'] === 'image/png'):\n            case (attachment['content_type'] === 'image/jpeg'):\n                return renderImage();\n\n            case (attachment['content_type'] === 'text/csv'):\n                return renderCSV();\n\n            case (attachment['application'] === 'plotly'):\n                return renderPlotly();\n\n            case (attachment['application'] === 'bokeh'):\n                return renderBokeh();\n\n            case undefined:\n                return null;\n\n            default:\n                return <div className={isList ? css.message : css.text}>{t('notSupportedAttachment')}</div>;\n        }\n    };\n\n    return (\n        <div\n            ref={ref}\n            className={cx(css.attachment, className, {\n                'is-list': isList,\n                loading: loading && withLoader || loadingFullAttachment,\n            })}\n        >\n            <div\n                ref={viewRef}\n                className={cx(css.view, {\n                    'table': (attachment && attachment.data && attachment['content_type'] === 'text/csv'),\n                    'bokeh': (attachment && attachment.data && attachment['application'] === 'bokeh'),\n                })}\n\n                style={\n                    (attachment && attachment['content_type'] === 'text/csv')\n                        ? {transform: `scale(${tableScale})`}\n                        : {}\n                }\n            >\n                {renderAttachment()}\n            </div>\n        </div>\n    );\n};\n\nexport default props => (<StateProvider>\n    <Attachment {...props} />\n</StateProvider>);\n"],"names":["AccessForbidden","children","React","css","forbidden","image","message","Avatar","forwardRef","ref","className","name","color","size","withBorder","onClick","cx","avatar","border","slice","BackButton","Component","props","back","COLORS","white","blue","Spinner","isShown","align","spinner","show","Button","variant","fullWidth","isShowSpinner","button","CheckboxField","value","disabled","appearance","label","onLabel","offLabel","checkbox","__html","wrapper","mark","Copy","copyText","successMessage","buttonTitle","useTranslation","t","useState","isShowMessage","setIsShowMessage","onCLick","copy","setTimeout","icon","CodeViewer","language","fontSize","code","Dropdown","buttonClassName","items","isShow","setIsShow","buttonRef","useRef","dropdownRef","useEffect","document","body","addEventListener","outlineClickHandle","removeEventListener","event","targetElement","target","current","parentNode","onCLickButton","clickStopPropagation","stopPropagation","preventDefault","onCLickItem","item","dropdown","active","offset","menu","map","i","index","title","cloneElement","unicodeBase64Decode","text","decodeData","window","atob","decodeURIComponent","Array","prototype","call","c","charCodeAt","toString","join","e","formatBytes","bytes","decimals","k","dm","sizes","Math","floor","log","parseFloat","pow","toFixed","FileDragnDrop","formats","loading","progressPercent","onChange","inputRef","setActive","selectedFile","setSelectedFile","isDidMount","click","preventStop","onDrop","dataTransfer","files","file","checkAvailableExtension","onDragEnter","onDragLeave","onChangeInput","removeFile","ext","split","pop","isAvailable","length","some","format","dnd","progressBar","progress","width","fileExtend","fileSection","fileName","fileSize","fileRemove","placeholder","Boolean","Loader","loader","grid","pic","section","MarkdownRender","newProps","plugins","RemarkMathPlugin","renderers","math","inlineMath","Modal","dialogClassName","onClose","withCloseButton","onClickByLayer","currentTarget","Portal","modal","dialog","close","API_URL","GA_ID","DOCS_URL","LOGIN_URL","VERIFY_EMAIL_URL","USER_DATA_URL","UPDATE_TOKEN_URL","UPDATE_SETTINGS_URL","CHECK_USER","userName","STACKS_LIST","DELETE_STACK","STACK_DETAILS","stack","STACK_FRAME","frameId","STACK_ATTACHMENT","id","STACK_UPDATE","STACK_PUSH","DASHBOARD_LIST","DASHBOARD_DETAILS","DASHBOARD_CREATE","DASHBOARD_UPDATE","DASHBOARD_DELETE","DASHBOARD_CARDS_INSERT","DASHBOARD_CARDS_UPDATE","DASHBOARD_CARDS_DELETE","DISCORD_URL","TWITTER_URL","GITHUB_URL","MEDIUM_URL","CONFIGURE_PYTHON_COMMAND","token","origin","location","CONFIGURE_R_COMMAND","NotFound","help","config","ProgressBar","isActive","globalProgress","setProgress","setWidth","prevIsActive","usePrevious","step","currentProgress","requestFrame","startCalculateProgress","cancelAnimationFrame","onResize","offsetWidth","requestAnimationFrame","calculateProgress","useCallback","round","atan","PI","bar","backgroundSize","TextField","errors","hasErrors","field","input","error","SearchField","showEverything","isDark","clear","onChangeHandle","search","allValue","SelectField","propValue","mode","options","showSearch","indexOf","o","onSelect","onDeselect","renderOptions","Option","Select","OptGroup","CustomHandle","style","left","transform","SliderField","slider","StackFilters","fields","form","filters","Object","keys","key","type","select","isArray","min","max","StretchTitleField","hidden","Tabs","tabs","tab","soon","TextAreaField","textarea","Tooltip","overlayContent","arrowContent","placement","trigger","overlayStyle","tooltip","ViewSwitcher","stateValue","setStateValue","toggleValue","newValue","switcher","Yield","getElementById","Table","data","captions","rows","table","caption","row","cell","instance","axios","create","baseURL","crossDomain","interceptors","request","use","localStorage","getItem","headers","Authorization","response","_get","Promise","reject","FETCH","FETCH_SUCCESS","FETCH_FAIL","initialState","requestStatus","reducer","state","action","actionsTypes","meta","payload","StateContext","createContext","StateProvider","useReducer","useStateValue","useContext","dispatch","fetchAttachment","onSuccess","api","get","attachment","JSON","parse","console","base64ToJSON","base64","parsedJSON","base64ImagePrefixes","isImageType","test","Attachment","isList","withLoader","actions","tableScale","setTableScale","loadingFullAttachment","setLoadingFullAttachment","fullAttachment","setFullAttachment","viewRef","prevAttachment","onResizeCard","fetchFullAttachment","url","isEqual","preview","useIntersectionObserver","Bokeh","json","querySelector","embed","embed_item","containerWidth","viewWidth","newScale","renderImage","renderCSV","decodeCSV","CSV","renderPlotly","layout","margin","autosize","responsive","height","renderBokeh","renderAttachment","undefined","view"],"mappings":"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"}